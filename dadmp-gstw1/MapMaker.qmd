---
title: "Happiness"
author: "Robert W. Walker"
date: "2025-09-18"
format: html
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, message=FALSE, warning=FALSE)
```

```{r setup2, include=FALSE, echo=FALSE}
library(radiant)
Happiness <- structure(list(COUNTRY = structure(c(1L, 4L, 2L, 136L, 5L, 6L, 
7L, 8L, 9L, 23L, 13L, 15L, 21L, 11L, 20L, 10L, 17L, 12L, 14L, 
16L, 19L, 18L, 27L, 26L, 127L, 28L, 29L, 69L, 25L, 32L, 30L, 
31L, 33L, 35L, 36L, 37L, 52L, 39L, 40L, 38L, 41L, 3L, 42L, 43L, 
123L, 47L, 48L, 49L, 50L, 45L, 51L, 53L, 56L, 46L, 54L, 55L, 
57L, 59L, 34L, 58L, 60L, 63L, 62L, 66L, 64L, 65L, 61L, 67L, 68L, 
70L, 72L, 71L, 74L, 75L, 78L, 24L, 76L, 77L, 79L, 81L, 82L, 83L, 
124L, 84L, 85L, 80L, 94L, 92L, 86L, 91L, 89L, 90L, 22L, 93L, 
95L, 73L, 87L, 88L, 96L, 101L, 102L, 100L, 98L, 103L, 97L, 99L, 
104L, 105L, 107L, 108L, 109L, 110L, 106L, 111L, 112L, 113L, 114L, 
115L, 125L, 116L, 118L, 117L, 44L, 121L, 119L, 120L, 126L, 128L, 
131L, 130L, 129L, 135L, 132L, 133L, 134L, 137L, 138L, 139L, 140L, 
141L, 142L, 143L, 144L, 122L, 145L, 146L), .Label = c("Afghanistan", 
"Albania", "Algeria", "Angola", "Argentina", "Armenia", "Australia", 
"Austria", "Azerbaijan", "Bahrain", "Bangladesh", "Belarus", 
"Belgium", "Belize", "Benin", "Bolivia", "Bosnia and Herzegovina", "Botswana", 
"Brazil", "Bulgaria", "Burkina Faso", "Burma", "Burundi", "Cambodia", 
"Cameroon", "Canada", "Central African Republic", "Chile", "China", "Colombia", 
"Comoros", "Republic of the Congo", "Costa Rica", "Croatia", "Cuba", "Cyprus", 
"Czechia", "Denmark", "Djibouti", "Dominica", "Dominican Republic", 
"Ecuador", "Egypt", "El Salvador", "United Kingdom", "Equatorial Guinea", "Estonia", 
"Ethiopia", "Finland", "France", "Georgia", "Germany", "Ghana", 
"Greece", "Guatemala", "Guinea", "Guyana", "Haiti", "Honduras", 
"Hungary", "Iceland", "India", "Indonesia", "Iran", "Iraq", "Ireland", 
"Israel", "Italy", "Ivory Coast", "Jamaica", "Japan", "Jordan", 
"Mauritania", "Kazakhstan", "Kenya", "South Korea", "Kuwait", "Kyrgyzstan", 
"Laos", "Latvia", "Lebanon", "Liberia", "Libya", "Lithuania", 
"Luxembourg", "Madagascar", "Malawi", "Malaysia", "Mali", "Malta", 
"Mexico", "Moldova", "Mongolia", "Morocco", "Mozambique", "Namibia", 
"Nepal", "Netherlands", "New Zealand", "Nicaragua", "Niger", "Nigeria", 
"Norway", "Pakistan", "Panama", "Paraguay", "Peru", "Philippines", 
"Poland", "Portugal", "Qatar", "Romania", "Russia", "Rwanda", 
"Saudi Arabia", "Senegal", "Sierra Leone", "Singapore", "Slovakia", 
"Slovenia", "Somalia", "South Africa", "Spain", "Sri Lanka", "Sudan", 
"Sweden", "Switzerland", "Syria", "Tajikistan", "Thailand", "Togo", 
"Trinidad and Tobago", "Tunisia", "Turkey", "Turkmenistan", "United Arab Emirates", "Uganda", 
"Ukraine", "Uruguay", "United States of America", "Uzbekistan", "Venezuela", "Vietnam", 
"Yemen", "Zambia", "Zimbabwe"), class = "factor"), COMP = c(52.12959, 
52.28271, 76.70827, 81.618, 80.76226, 75.57718, 90.52848, 90.2781, 
73.99906, 59.87803, 90.76898, 63.4697, 59.8035, 65.97387, 77.98952, 
79.63063, 77.26235, 81.98572, 73.8254929, 68.99096, 68.22833, 
60.57606, 47.82005, 90.73959, 91.11234, 84.81009, 67.02277, 61.70926, 
57.86289, 60.70486, 82.89871, 64.48311, 82.17812, 84.24957, 87.73157, 
86.06212, 90.13463, 56.84334, 83.35202, 90.49382, 77.15543, 72.69473, 
72.89397, 71.64907, 89.94376, 80.32989, 51.3287, 89.59339, 91.05387, 
90.6273, 77.44279, 64.53224, 56.03661, 58.37903, 90.03814, 70.5125, 
70.12786, 66.52342, 84.48454, 62.48465, 82.0611, 71.95042, 68.42618, 
90.1, 70.81664, 70.83776, 90.67265, 89.62062, 90.36459, 77.35585, 
75.89697, 92.67496, 80.8582, 66.25568, 66.98758, 58.17504, 84.42123, 
81.59076, 59.99717, 74.68958, 50.09993, 75.39095, 76.3818, 80.09408, 
91.09504, 76.97948, 73.95412, 76.68364, 57.8296, 80.36516, 52.07639, 
86.96616, 50.76779, 67.08947, 49.52257, 55.54007, 53.37005, 80.31348, 
59.85852, 49.89964, 49.36736, 72.32797, 91.29739, 91.16924, 56.71525, 
88.79801, 66.00882, 77.07034, 70.06952, 79.1925, 84.86331, 86.93298, 
77.13239, 81.05595, 78.21752, 74.01841, 56.3897, 78.88734, 60.14378, 
69.47527, 88.03452, 35.69057, 67.86023, 49.36176, 83.77671, 86.4761, 
90.96922, 71.11044, 60.95445, 80.55582, 67.11851, 67.62697, 79.71739, 
76.04214, 73.75501, 60.72412, 81.32495, 80.52442, 90.44346, 73.69603, 
77.78915, 65.01073, 60.88839, 59.78759, 57.84963, 63.25481), 
    HLTHEXP = c(28.28851, 47.17409, 63.5321, 811.2903, 750.9926, 
    88.66507, 1500.579, 1765.072, 46.87725, 27.3746, 1716.28, 
    23.5714, 33.29662, 52.11635, 241.6521, 573.8979, 144.8699, 
    321.9766, 212.2966, 135.1976, 408.6136, 182.5179, 22.08362, 
    1937.074, 2499.478, 415.4161, 48.62125, 61.74765, 49.04083, 
    118.7311, 235.6684, 59.13337, 526.2556, 109.2828, 553.915, 
    638.4891, 2065.952, 47.91993, 286.7744, 1792.466, 179.2626, 
    125.6391, 185.3671, 96.01839, 1044.42, 276.3999, 16.22993, 
    1470.532, 1935.46, 1141.919, 155.7507, 56.73648, 51.92607, 
    54.58556, 699.1649, 109.0921, 74.49631, 157.3467, 301.7357, 
    58.56356, 344.7854, 48.26081, 71.3253, 1014.153, 171.3926, 
    127.0219, 1652.124, 1186.239, 1528.634, 183.0163, 125.4661, 
    1539.027, 121.6175, 53.72102, 66.12618, 73.09781, 620.9066, 
    436.5403, 52.39597, 90.58173, 33.29099, 220.463, 69.98882, 
    186.1436, 1612.042, 164.518, 150.8243, 122.1636, 17.84211, 
    436.6107, 18.63399, 709.6706, 37.40006, 68.17729, 32.61242, 
    66.8754, 44.98674, 169.2946, 364.4986, 26.95492, 27.55931, 
    125.9937, 1800.407, 1761.33, 42.56554, 1225.766, 70.13489, 
    389.9866, 200.8851, 78.11317, 299.124, 776.5722, 154.7002, 
    1037.207, 114.2403, 212.8452, 37.96833, 371.0197, 33.09784, 
    64.64751, 652.0869, 31.44406, 154.3263, 11.06188, 269.0399, 
    835.5659, 1837.521, 95.06709, 42.56456, 267.0333, 105.7588, 
    53.1764, 286.5211, 217.1699, 189.309, 34.18021, 169.1897, 
    543.952, 3326.02, 124.7912, 300.7437, 52.71697, 32.15713, 
    551.256, 47.68624, 101.26), EDUC = c(1.358772, 2.248598, 
    4.88903, 4.696802, 8.442671, 7.861154, 10.42096, 7.525875, 
    6.806227, 1.957302, 9.037189, 1.487338, 1.537715, 2.273876, 
    9.311997, 4.893201, 7.905137, 8.954906, 3.896607, 5.20391, 
    3.910882, 4.005845, 2.039932, 10.39449, 9.254093, 6.945362, 
    6.21514, 2.153697, 3.315153, 5.135983, 4.950612, 2.804025, 
    5.728269, 7.9089, 7.667553, 10.16979, 9.117691, 1.661786, 
    6.456229, 10.71446, 4.655016, 4.561303, 6.19734, 3.27986, 
    7.101693, 8.620577, 1.792197, 9.691003, 6.99921, 8.921108, 
    10.32519, 3.920632, 2.534518, 4.234846, 8.221205, 3.225476, 
    5.839412, 4.380926, 8.607602, 3.175303, 9.092264, 4.988882, 
    4.509225, 8.22893, 4.240508, 4.381313, 8.337355, 9.501622, 
    6.754789, 4.833312, 6.197104, 9.126405, 6.906604, 4.002636, 
    6.516621, 5.095714, 10.47422, 6.360345, 6.536091, 6.503596, 
    2.549784, 6.32472, 6.139225, 8.041306, 8.646609, 8.769809, 
    2.148107, 7.784933, 3.374264, 7.199665, 0.9387497, 5.318271, 
    2.694401, 6.247375, 0.9757626, 2.575172, 2.85435, 6.234735, 
    3.9444, 0.9271404, 3.541323, 3.810231, 8.897238, 8.190187, 
    1.945935, 11.22, 4.330679, 8.162378, 6.557702, 7.181673, 
    9.584707, 6.059676, 5.151762, 6.048028, 9.559786, 9.379188, 
    3.088496, 3.40883, 1.660916, 2.383482, 6.155773, 2.573255, 
    3.592362, 1.0606, 10.16979, 8.871078, 9.59424, 5.457739, 
    3.261572, 5.834805, 7.912294, 7.659199, 7.276237, 4.382005, 
    4.042817, 1.891651, 9.132311, 7.302912, 11.5, 7.066649, 5.087951, 
    8.407147, 1.417066, 5.558424, 5.004884, 3.744563), DALE = c(37.62949, 
    37.92818, 60.17352, 65.04469, 65.93243, 65.33929, 71.20222, 
    70.72821, 63.83143, 35.37568, 71.33727, 41.23131, 36.1821, 
    47.78469, 64.99635, 64.01929, 64.88881, 62.99058, 60.96363, 
    51.45922, 58.3428, 36.70214, 37.59466, 71.409, 71.68045, 
    67.97839, 62.05125, 44.62351, 41.0076, 45.83652, 62.21415, 
    44.44762, 66.28331, 67.30845, 69.20259, 66.75576, 69.62795, 
    37.87191, 64.20939, 69.24908, 61.51875, 59.80529, 59.75651, 
    56.47625, 72.01181, 61.85543, 34.47367, 69.62247, 72.51885, 
    71.00001, 66.41756, 43.79796, 37.80931, 42.23885, 72.26342, 
    52.67713, 59.21735, 59.58731, 66.72998, 44.90775, 63.0449, 
    57.65296, 51.41566, 69.34448, 58.83414, 57.79858, 70.6584, 
    69.86395, 72.05246, 66.62946, 59.12791, 74.10031, 58.37509, 
    42.02465, 56.38791, 45.74279, 64.13139, 62.62633, 46.07714, 
    59.41225, 33.94171, 59.32537, 61.75496, 63.21535, 70.57317, 
    61.33195, 57.41249, 62.21608, 36.6094, 64.31928, 31.65963, 
    69.89934, 49.67385, 53.73906, 33.16264, 39.71563, 30.34622, 
    60.75206, 36.42857, 28.38013, 36.03014, 56.03069, 71.93632, 
    70.95346, 47.26181, 68.26979, 54.24062, 65.08427, 57.72616, 
    57.19992, 65.28471, 68.81223, 62.09007, 63.41601, 62.7994, 
    60.97159, 32.81456, 63.33136, 40.18339, 42.74144, 68.71217, 
    25.92086, 59.22853, 36.31383, 65.84834, 67.27425, 72.25932, 
    57.35205, 41.70441, 60.04078, 56.04052, 54.52082, 63.69416, 
    59.7591, 61.08082, 35.2766, 64.34843, 66.32887, 69.72151, 
    60.35472, 64.33379, 57.32494, 48.41396, 39.22404, 33.34867, 
    34.62983), GINI = c(0.334725, 0.444238, 0.441193, 0.3679, 
    0.474325, 0.285139, 0.341, 0.2235, 0.285139, 0.3223, 0.2416, 
    0.444238, 0.4621, 0.3233, 0.2743, 0.3679, 0.319462, 0.2099, 
    0.474325, 0.4062, 0.5727, 0.441193, 0.5894, 0.306, 0.3188, 
    0.5369, 0.3889, 0.3536, 0.444238, 0.441193, 0.5425, 0.444238, 
    0.453, 0.3492, 0.3679, 0.2432, 0.2899, 0.334725, 0.474325, 
    0.2393, 0.4672, 0.3416, 0.4209, 0.2784, 0.3144, 0.3406, 0.3812, 
    0.2488, 0.3164, 0.348, 0.319462, 0.3169, 0.3876, 0.444238, 
    0.3168, 0.5695, 0.3844, 0.5154, 0.2599, 0.4642, 0.285, 0.3487, 
    0.3558, 0.3464, 0.3679, 0.334725, 0.285139, 0.3434, 0.26492, 
    0.3965, 0.3494, 0.2397, 0.3428, 0.4274, 0.3905, 0.3843, 0.3054, 
    0.3679, 0.291, 0.3679, 0.444238, 0.3679, 0.3324, 0.3127, 
    0.2609, 0.3117, 0.3821, 0.3322, 0.4414, 0.513, 0.4836, 0.285139, 
    0.343567, 0.3216, 0.3796, 0.3758, 0.441193, 0.4657, 0.441193, 
    0.4881, 0.4809, 0.4814, 0.3136, 0.2507, 0.3516, 0.29035, 
    0.2986, 0.4686, 0.443, 0.4429, 0.317, 0.3441, 0.5637, 0.3679, 
    0.2728, 0.4641, 0.2784, 0.3679, 0.334725, 0.3956, 0.29035, 
    0.6091, 0.5001, 0.334725, 0.1873, 0.2604, 0.2429, 0.3679, 
    0.444238, 0.3988, 0.319462, 0.3932, 0.389, 0.3864, 0.3979, 
    0.3743, 0.3132, 0.4075, 0.3924, 0.3227, 0.4684, 0.3461, 0.3798, 
    0.5707, 0.476, 0.5427), TROPICS = c(0, 1, 0, 0, 0, 0, 0, 
    0, 0, 1, 0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 
    0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 0, 1, 0, 1, 0, 0, 
    0, 1, 0, 0, 0, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0, 1, 0, 0, 
    0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 1, 0, 1, 
    0, 0, 0, 0, 0, 1, 1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 
    0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 
    1, 1, 1, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 
    1, 1, 1, 0, 1, 1), POPDEN = c(38.88943, 936.0811, 115.9557, 
    24.15357, 1282.278, 124.1774, 224.562, 96.25747, 90.35733, 
    254.075, 333.0196, 49.85168, 38.26159, 880.3256, 74.92934, 
    1217.357, 68.4550018, 50.1920013, 10.50579, 597.7834, 1922.859, 
    2.643033, 5.49989, 312.7715, 172.2328, 19.71762, 13329.46, 
    44.40993, 301.2809, 7.848245, 3511.532, 255.0355, 67.25978, 
    102.6497, 80.81602, 136.1699982, 230.7111, 29.78877, 100.847, 
    123.3228, 168.3128, 1262.716, 46.46882, 61.70844, 77.54457, 
    32.63972, 5307.809, 15.60579, 104.2245, 258.2351, 77.36629, 
    79.15656, 282.2594, 15.4514, 80.12562, 97.58974, 4.03159, 
    53.10673, 73.8330002, 275.8844, 109.0545, 10383.45, 29313.08, 
    34.92001, 3761.498, 506.0222, 2.939686, 278.5973, 1862.068, 
    231.2673, 49.3423, 335.9699, 579.1731, 49.8693, 23.4699993, 
    58.14934, 477.3148, 106.233, 21.13022, 402.4357, 29.80719, 
    321.4071, 281.03, 57.53334, 159.7377, 38.51478, 40.50924, 
    128.4036, 23.90373, 4771.601, 819.941, 1128.159, 66.55068, 
    160.7245, 21.32993, 236.2041, 108.7929, 66.40154, 1.982742, 
    828.4401, 130.5448, 39.36331, 373.7532, 14.3934, 149.7128, 
    13.90727, 1621.015, 36.78779, 1879.318, 251.3176, 123.7347, 
    97.88559, 12.72439, 65.19934, 94.76482, 8756.286, 344.0166, 
    1036.877, 1107.26, 446.6203, 6034.416, 66.30461, 290.1394, 
    13.70896, 111.2180023, 95.5189972, 19.95147, 79.23328, 75.84976, 
    117.6426, 41.29302, 8.7559996, 253.7658, 59.24768, 80.39946, 
    99.05495, 85.21548, 18.3448, 2883.17, 52.61611, 24.87126, 
    232.4986, 40.1066, 3343.239, 12.70456, 29.63358), PUBTHE = c(40.6, 
    59.6, 77.7, 32, 57.5, 41.5, 72, 67.3, 79.3, 35.6, 83.2, 47.2, 
    30.9, 46, 81.9, 58.5, 92.6, 82.6, 51.6, 59.1, 48.7, 61, 68.9, 
    72, 69.3, 49, 24.9, 38.4, 20.1, 36.6, 54.5, 68.2, 77.1, 87.5, 
    35, 92.3, 77.5, 72.9, 65, 84.3, 38.5, 50.8, 52.8, 27, 70.6, 
    78.9, 36.2, 73.7, 76.9, 96.9, 8.6, 47, 57.2, 57.2, 65.8, 
    62.5, 79.1, 36, 79.7, 33.6, 84.9, 36.8, 13, 77.3, 42.8, 58.9, 
    83.8, 75, 57.1, 56.5, 67.2, 80.2, 63.6, 64.1, 69.6, 9.4, 
    37.8, 87.4, 62.7, 29.6, 66.7, 54.2, 45.4, 75.7, 91.4, 61, 
    40.7, 75.1, 53.8, 41, 45.8, 58.9, 12.6, 82, 71.3, 30.3, 59.2, 
    57.6, 51.7, 46.6, 28.2, 53.3, 70.7, 82, 26, 71.7, 22.9, 74, 
    39.7, 48.5, 71.6, 57.5, 35.6, 57.5, 60.3, 76.8, 50.1, 89.6, 
    20.9, 55.7, 35.8, 9.7, 37.2, 71.4, 81.8, 80.8, 78, 33.6, 
    42.8, 33, 87.8, 86, 58.6, 41.7, 74, 38.7, 75.5, 20.3, 44.1, 
    80.9, 67.4, 20, 37.9, 46.5, 53.3, 48), GDPC = c(884.0158, 
    1310.391, 1815.203, 19484.48, 10009.35, 1935.348, 20632.34, 
    21900.72, 1616.457, 648.1224, 21832.19, 1283.931, 885.904, 
    1419.614, 3994.829, 12306.51, 1906.182, 4272.954, 4516.949, 
    2660.176, 6565.337, 5157.362, 1154.47, 21487.91, 26202.4, 
    9566.769, 2771.556, 1802.619, 1744.228, 2017.197, 5470.452, 
    1054.651, 5616.29, 1734.647, 12487.21, 8423.629, 22468.87, 
    1711.426, 4779.574, 24271.98, 4153.332, 4007.687, 4084.988, 
    3156.843, 15186.38, 5428.406, 521.4947, 20322.61, 21617.45, 
    20590.65, 2144.914, 1461.798, 1483.602, 2540.019, 12081.33, 
    3597.942, 2526.084, 2090.615, 5075.507, 1186.75, 7037.542, 
    3307.605, 1622.574, 19471.57, 4552.368, 2593.688, 22336.83, 
    17019.19, 19629.71, 3522.981, 3431.329, 24691.82, 3277.51, 
    1255.19, 1653.155, 1015.247, 12821.7, 18524.38, 1455.444, 
    5555.69, 1109.7, 6484.204, 2557.6, 4518.349, 30264.31, 4039.249, 
    3006.085, 1607.085, 849.6241, 7480.272, 802.3489, 12013.18, 
    3050.58, 1585.518, 856.0034, 1305.093, 850.2955, 8580.12, 
    4135.5, 766.5248, 1135.296, 1872.27, 21614.34, 26092.33, 
    1102.669, 17038.7, 1768.268, 6004.396, 4400.543, 2892.566, 
    6334.302, 12954.06, 3648.167, 17140.38, 3559.234, 4680.818, 
    825.3057, 9608.968, 1260.87, 1582.494, 25322.54, 641.7155, 
    3246.094, 737.4588, 7057.612, 11083.81, 21093.61, 4293.097, 
    1230.593, 6130.667, 1231.329, 2086.394, 7771.288, 4600.777, 
    5872.366, 1064.219, 2303.061, 8476.808, 27162.55, 2608.276, 
    7705.707, 1354.894, 975.4692, 5621.199, 1089.233, 2103.093
    ), GEFF = c(-1.233, -1.39, -0.653, 0.138, 0.262, -0.655, 
    1.459, 1.219, -0.833, -1.135, 0.883, -0.066, -0.059, -0.565, 
    -0.814, 0.235, -1.108, -0.659, 0.554, -0.223, -0.22, 0.221, 
    -0.747, 1.717, 1.986, 1.166, 0.016, -0.18, -0.645, -0.58, 
    -0.057, -0.743666, 0.554, -0.497, 1.041, 0.595, 1.409, -0.235, 
    -0.833, 1.721, -0.833, -1.087, -0.562, -0.138, 1.603, 0.258, 
    -0.146, 1.635, 1.28, 1.966, -0.512, -0.287, -0.029, -1.204, 
    0.56, -0.225, 0.009, -0.409, 0.15, -1.232, 0.606, -0.528, 
    -0.264, 1.361, -0.339, -1.883, 1.504, 0.685, 0.773, -0.484, 
    0.63, 0.839, -0.824, -0.899, -0.575, 0.337, 0.409, -0.063, 
    -0.395, 0.174, -0.922, -1.322, -0.612, 0.127, 1.674, 0.068, 
    0.267, -0.46, -0.295, 0.179, -0.052, 0.629, -1.461, 0.018, 
    -0.331, -0.656, -0.625, 0.714, 0.044, -1.387, -1.321, -0.547, 
    2.03, 1.666, -1.038, 1.571, -0.744, -0.277, 0.173, 0.126, 
    0.674, 1.151, -1.1, 0.48, -0.57, -0.595, -1.204, -0.349, 
    -1.697, 0.047, 2.082, 0.009, -0.262, -1.697, -0.032, 0.567, 
    1.573, -1.181, -0.374, 0.01, -1.423, -1.252, 0.521, 0.633, 
    -0.412, -0.251, -0.893, 0.618, 1.366, -1.305, -0.849, -0.3, 
    -0.621, -0.01, -0.399, -1.129), VOICE = c(-1.616, -1.003, 
    -0.008, -0.545, 0.482, 0.019, 1.628, 1.447, -0.919, -1.288, 
    1.436, 0.695, -0.213, -0.015, 0.603, -1.037, -0.971, -0.521, 
    1.231, 0.391, 0.552, 0.779, -0.046, 1.362, 1.694, 0.615, 
    -1.296, -0.569, -0.703, -0.773, -0.12, 0.061, 1.345, -1.461, 
    1.115, 1.201, 1.49, -0.602, -0.078, 1.633, -0.078, -1.31, 
    0.268, -0.674, 1.338, 0.789, -0.5, 1.602, 1.15, 1.489, -0.291, 
    -0.435, -0.873, -1.389, 1.075, -0.565, 1.01, -0.055, -0.323, 
    -0.709, 1.198, -1.165, 0.498, 1.501, -0.559, -1.753, 1.447, 
    1.083, 1.287, 0.75, 0.153, 1.163, -0.712, -0.701, -0.248, 
    -0.909, 1.002, 0, -1.05, -0.404, -0.888, -1.346, -0.157, 
    0.767, 1.461, 0.625, -0.24, 0.161, 0.309, -0.108, 0.415, 
    1.413, -1.748, 0.843, -0.172, -0.971, 0.062, -0.144, 0.473, 
    -0.744, -1.234, 0.069, 1.607, 1.654, 0.047, 1.457, -0.441, 
    0.665, -0.687, 0.614, 1.07, 1.479, -0.419, -0.775, 0.406, 
    -0.311, -1.175, -1.103, -1.498, -0.292, 0.04, -1.623, -0.1, 
    -1.694, 0.738, 1.066, 1.628, -1.358, -1.051, 0.215, -1.565, 
    -1.451, 0.953, -0.589, -0.859, -0.517, -0.008, 0.77, 1.505, 
    -1.343, 0.179, -1.416, -0.415, 0.991, -0.046, -0.666), HAPPY = c(10, 
    11, 13, 51, 44, 11, 62, 57, 13, 2, 56, 4, 3, 16, 6, 32, 20, 
    29, 44, 34, 58, 24, 12, 62, 62, 41, 9, 4, 14, 8, 46, 2, 63, 
    24, 46, 39, 43, 7, 35, 82, 35, 18, 34, 10, 36, 17, 12, 75, 
    35, 54, 10, 9, 8, 8, 31, 40, 31, 37, 26, 4, 13, 18, 10, 49, 
    19, 11, 47, 62, 39, 46, 30, 19, 22, 9, 13, 3, 28, 47, 7, 
    21, 5, 24, 10, 25, 45, 11, 10, 25, 7, 52, 5, 40, 16, 7, 10, 
    10, 25, 15, 11, 3, 18, 30, 68, 69, 7, 63, 27, 58, 25, 15, 
    28, 22, 32, 41, 21, 21, 3, 27, 7, 6, 19, 3, 42, 18, 21, 27, 
    68, 10, 1, 20, 7, 52, 44, 14, 13, 6, 21, 41, 57, 18, 50, 
    14, 14, 21, 14, 10), Factor.Tropics = structure(c(1L, 2L, 
    1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 2L, 2L, 1L, 1L, 1L, 1L, 
    1L, 2L, 2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 
    2L, 1L, 1L, 1L, 1L, 2L, 2L, 1L, 2L, 1L, 2L, 1L, 1L, 1L, 2L, 
    1L, 1L, 1L, 1L, 2L, 2L, 2L, 1L, 2L, 2L, 2L, 1L, 2L, 1L, 2L, 
    1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 2L, 1L, 2L, 1L, 
    1L, 2L, 1L, 2L, 1L, 2L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 1L, 
    2L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 
    2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 2L, 2L, 2L, 2L, 
    2L, 2L, 1L, 1L, 1L, 1L, 2L, 2L, 1L, 1L, 2L, 1L, 1L, 2L, 1L, 
    1L, 1L, 1L, 2L, 2L, 2L, 1L, 2L, 2L), .Label = c("0", "1"), class = "factor")), row.names = c(NA, 
-146L), class = "data.frame")
Happiness$COUNTRY <- as.character(Happiness$COUNTRY)
```


![](https://github.com/robertwwalker/DADMStuff/raw/master/HappinessData.png)

```{r, warning=FALSE, message=FALSE}
# install.packages("rnaturalearth")
library(rnaturalearth)
library(tidyverse)
library(ggthemes)
library(plotly)
worldmap <- ne_download(scale = 110,
                                        type = "countries",
                                        category = "cultural",
                                        destdir = tempdir(),
                                        load = TRUE,
                                        returnclass = "sf")
left_join(worldmap, Happiness, by=c("SOVEREIGNT" = "COUNTRY")) -> WM.Happy
```

There's the data.  Now for esquisse...

```{r}
ggplot(WM.Happy) +
 aes(fill = HAPPY, text = SOVEREIGNT) +
 geom_sf(size = 0.1) +
 scale_fill_viridis_c() +
 theme_map() + labs(title="Mapping Forbes Happiness Index", fill="Happiness") -> My.GGP
My.GGP
```

## A Tool Called Plotly

```{r}
ggplotly(My.GGP)
```


## WDI

```{r}
library(WDI)
EdAtt1 <- WDI(country="all", indicator=c("SE.SEC.CUAT.LO.ZS"), start=2018, end=2020) |> group_by(iso3c) |> summarise(Sec.Edu.Att = mean(SE.SEC.CUAT.LO.ZS, na.rm=TRUE)) 
WM.EA <- left_join(worldmap, EdAtt1, by=c("ISO_A3" = "iso3c"))
ggplot(WM.EA) +
 aes(fill = Sec.Edu.Att) +
 geom_sf(size = 0.1) +
 scale_fill_viridis_c() +
 theme_map() + labs(title="Sec. Educational Attainment", fill="Educ. Att")
```


```{r}  
EdAtt1 <- WDI(country="all", indicator=c("DT.DOD.PVLX.EX.ZS"), start=2018, end=2020) |> group_by(iso3c) |> summarise(Series.Mean = mean(DT.DOD.PVLX.EX.ZS, na.rm=TRUE)) 
tempf <- left_join(worldmap, EdAtt1, by=c("ISO_A3" = "iso3c"))
ggplot(tempf) +
 aes(fill = Series.Mean) +
 geom_sf(size = 0.1) +
 scale_fill_viridis_c() +
 theme_map() + labs(title="External Debt pc", fill="Debt")
```

## Using Eurostat

```{r}
library(kableExtra)
library(eurostat)
toc <- get_eurostat_toc()
kable(search_eurostat("migrant", column = "code")) |> kableExtra::scroll_box(width="80%")
```

## VDem

```{r}
library(vdemdata)
vdemdata::vdem -> vdem

vdem_map <- left_join(worldmap, vdem, by = c("SOVEREIGNT"="country_name"))
vdem_map %>% 
  filter(year %in% c(1945:2023)) %>% 
  filter(SOVEREIGNT != "Antarctica") %>% 
  group_by(SOVEREIGNT, geometry) %>% 
  summarise(avg_polyarchy = mean(v2x_polyarchy, na.rm = TRUE)) %>% 
  ungroup() %>% 
  ggplot() +
  geom_sf(aes(geometry = geometry, fill = avg_polyarchy),  
          position = "identity", color = "#212529", linewidth = 0.2, alpha = 0.85) +
  scale_fill_viridis_c() +
  labs(fill="Avg. Polyarchy", title="Average Polyarchy") +
  theme_minimal()
```

```{r}
vdem_map %>% 
  filter(year %in% c(2020:2023)) %>% 
  filter(SOVEREIGNT != "Antarctica") %>% 
  group_by(SOVEREIGNT, geometry) %>% 
  summarise(avg_polyarchy = mean(v2x_polyarchy, na.rm = TRUE)) %>% 
  ungroup() %>% 
  ggplot() +
  geom_sf(aes(geometry = geometry, fill = avg_polyarchy),  
          position = "identity", color = "#212529", linewidth = 0.2, alpha = 0.85) +
  scale_fill_viridis_c() +
  labs(fill="Avg. Polyarchy", title="Average Polyarchy since 2020") +
  theme_minimal()
```

